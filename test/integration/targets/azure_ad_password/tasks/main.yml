- name: create ad password 
  azure_ad_password:
    app_id: d5a64010-3334-464f-8720-8ad850437eec
    value: "$Abc1234567800000001"
    tenant: 72f988bf-86f1-41af-91ab-2d7cd011db47
    state: present
  register: output

 - assert:
     that:
         - output.changed

- name: create ad password (idempontent)
  azure_ad_password:
    app_id: d5a64010-3334-464f-8720-8ad850437eec
    value: "$Abc1234567800000001"
    tenant: 72f988bf-86f1-41af-91ab-2d7cd011db47
    state: present
  register: output

 - assert:
     that:
         - not output.changed

- name: Get ad password info
  azure_ad_password_info:
    app_id: b6d3cf80-a95d-4c0c-bfc5-a63f08a1c301
    tenant: 72f988bf-86f1-41af-91ab-2d7cd011db47
    key_id: d33d730d-63e6-45f9-b165-eb723dfa10cd
  register: output

- assert:
    that:
        - output.passwords.key_id == "d33d730d-63e6-45f9-b165-eb723dfa10cd"

- name: delete ad password
  azure_ad_password:
    app_id: d5a64010-3334-464f-8720-8ad850437eec
    tenant: 72f988bf-86f1-41af-91ab-2d7cd011db47
    state: absent

 - assert:
     that:
         - output.changed
